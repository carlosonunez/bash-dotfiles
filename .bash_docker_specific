if ! which docker &>1
then
  printf "Installing ${BGreen}docker${NC}\n"
  case "$(get_os_type)" in
    "Darwin")
      brew install docker
      brew cask install docker
      ;;
    "Ubuntu"|"Debian")
      if grep -q 'Microsoft' /etc/lsb_release
      then
        printf "${BYellow}INFO${NC}: Connecting Docker-Windows engine to native Linux session\n"
        export DOCKER_HOST=tcp://0.0.0.0:2375
      else
        install_application "apt-transport-https ca-certificates curl"
        curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
        sudo add-apt-repository \
           "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
           $(lsb_release -cs) \
           stable"
        sudo apt-get update
        install_application "linux-image-extra-$(uname -r) linux-image-extra-virtual"
        install_application "docker-ce"
      fi
      ;;
    *)
      printf "${BRed}ERROR${NC}: You haven't written a Docker installation routine for this OS yet. Do it now!\n"
      return 1
  esac
fi

if [ "$(get_os_type)" != "Darwin" ] && ! $(id | grep -q "docker")
then
  printf "${BYellow}INFO${NC}: Adding your user to the 'docker' group. Password might be needed. \
  Log out then back in to apply these changes.\n"
  sudo usermod -aG docker $USER
fi
