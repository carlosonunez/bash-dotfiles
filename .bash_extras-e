# ===================
# Configures Ansible locally
# ===================
export PRJ_DIR=~/source
export ANSIBLE_DIR=$PRJ_DIR/ansible

# Ansible setup
echo $PATH | grep -q ansible || {
    echo "Looks like Ansible isn't configured on this machine. Let's fix that."
    which ansible  || {
      [ ! -d $ANSIBLE_DIR/.git ] && \
        git clone https://github.com/ansible/ansible.git $ANSIBLE_DIR ||
      . $ANSIBLE_DIR/hacking/env-setup 1>/dev/null
      pushd $ANSIBLE_DIR && git submodule update --init --recursive && popd
    }	
} && {
  pushd $ANSIBLE_DIR
  git pull -q
  popd
}

# Load vim pathogen
# =================
[[ ! -f ~/.vim/autoload/pathogen.vim ]] && {
  echo "Installing pathogen..."
  mkdir -p ~/.vim/autoload ~/.vim/bundle && \
  curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
}

# Load RVM
# =========
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" > /dev/null 2>&1  # Load RVM into a shell session *as a function*

# Set gopath
# ============
export GOROOT=$HOME/go
export PATH=$PATH:$GOROOT/bin

# Setup vim-go
# =============
[[ ! -f ~/.vim/vim-go ]] && {
    echo "Installing vim-go (a better vim plugin for Golang)"
    git clone https://github.com/fatih/vim-go.git ~/.vim/bundle/vim-go
}
